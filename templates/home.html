<!-- templates/home.html -->
<!DOCTYPE html>
<html>
<head>
    <title>Inicio</title>
    <style>
        body { font-family: Arial; max-width: 800px; margin: 50px auto; padding: 20px; }
        .nav { background: #f0f0f0; padding: 15px; border-radius: 5px; margin-bottom: 20px; }
        .nav a { margin-right: 15px; text-decoration: none; color: #333; }
        .user-info { background: #e8f5e9; padding: 10px; border-radius: 5px; }
        button, a.btn { padding: 10px 20px; background: #007bff; color: white; border: none; 
                        cursor: pointer; text-decoration: none; border-radius: 3px; display: inline-block; }
        button:hover, a.btn:hover { background: #0056b3; }
        .test-links { background: #fff3cd; padding: 15px; border-radius: 5px; margin-top: 20px; }
        .test-links a { display: block; margin: 5px 0; }
        .admin-badge { background: #dc3545; color: white; padding: 3px 8px; border-radius: 3px; font-size: 12px; }
    </style>
</head>
<body>
    <div class="nav">
        <a href="/">Inicio</a>
        {% if user %}
            <a href="/dashboard">Dashboard</a>
            <a href="/profile">Perfil</a>
            <a href="/dashboard/reportes">Reportes</a>
            {% if user.role == "admin" %}
                <a href="/admin">ğŸ” Admin</a>
            {% endif %}
            <a href="/configuracion">ConfiguraciÃ³n</a>
            <a href="/logout">Cerrar SesiÃ³n</a>
        {% else %}
            <a href="/login">Iniciar SesiÃ³n</a>
        {% endif %}
    </div>

    <h1>Sistema con Redirect After Login âœ¨</h1>
    
    {% if user %}
        <div class="user-info">
            <p>âœ… <strong>SesiÃ³n activa:</strong> {{ user.name }} ({{ user.username }})</p>
        </div>
    {% else %}
        <p>No has iniciado sesiÃ³n. <a href="/login" class="btn">Iniciar SesiÃ³n</a></p>
        
        <div class="test-links">
            <h3>ğŸ§ª Prueba el redirect automÃ¡tico:</h3>
            <p>Haz clic en cualquiera de estos enlaces sin iniciar sesiÃ³n:</p>
            <a href="/dashboard">â†’ Dashboard</a>
            <a href="/profile">â†’ Perfil</a>
            <a href="/dashboard/reportes">â†’ Reportes</a>
            <a href="/configuracion">â†’ ConfiguraciÃ³n</a>
            <p><strong>Â¡DespuÃ©s de iniciar sesiÃ³n volverÃ¡s automÃ¡ticamente a donde querÃ­as ir! ğŸ¯</strong></p>
        </div>
    {% endif %}

    <h2>Â¿QuÃ© hay de nuevo?</h2>
    <ul>
        <li>âœ… Si intentas acceder a una ruta protegida sin sesiÃ³n, el sistema <strong>recuerda dÃ³nde querÃ­as ir</strong></li>
        <li>âœ… DespuÃ©s de iniciar sesiÃ³n, <strong>vuelves automÃ¡ticamente</strong> a esa ruta</li>
        <li>âœ… Ya no tienes que navegar manualmente de nuevo</li>
        <li>âœ… Experiencia de usuario mucho mejor</li>
    </ul>
</body>
</html>